import os 
import pandas as pd 
import streamlit as st 

# üìÅ –ü—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º
CATALOG_PATH = os.path.join("data", "catalog.xlsx") 
# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –ø—É—Ç—å:
NO_IMAGE_PATH = os.path.join("data", "images", "no_image.jpg") 

# üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞
def load_catalog(): 
    df = pd.read_excel(CATALOG_PATH) 
    df.fillna('', inplace=True) 
    return df 

catalog = load_catalog() 

st.title("üõç –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤") 

# üß© –í—ã–≤–æ–¥ –∫–∞—Ä—Ç–æ—á–µ–∫
for _, row in catalog.iterrows(): 
    # --- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ---
    image_path = str(row.get('image', '')).strip() 
    if not image_path: 
        image_path = NO_IMAGE_PATH 
        
    # --- –¶–µ–Ω–∞ ---
    price = str(row.get('price', '')).strip() 
    price_html = f"<p style='font-size:16px; color:gray; margin:2px 0;'>{int(price)} ‚Ç∏</p>" if price.isdigit() else "" 
    
    # --- –ú–æ–¥–µ–ª—å ---
    model = str(row.get('model', '')).strip() 
    model_html = f"<p style='font-size:15px; color:#555; margin:2px 0;'>–ú–æ–¥–µ–ª—å: {model}</p>" if model else "" 
    
    # --- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ ---
    st.markdown(f""" 
    <div style="border:1px solid #ddd; border-radius:12px; padding:12px; margin:10px 0;"> 
        <img src="{image_path}" style="width:100%; border-radius:8px; margin-bottom:6px;"> 
        <p style="font-weight:bold; font-size:18px;">{row.get('name', '')}</p> 
        {model_html} 
        {price_html} 
    </div> 
    """, unsafe_allow_html=True)
