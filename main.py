import os
import pandas as pd
import streamlit as st

# üìÅ –ü—É—Ç—å –∫ –∫–∞—Ç–∞–ª–æ–≥—É
CATALOG_PATH = os.path.join("data", "catalog.xlsx")

# üîÑ –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–∞–ª–æ–≥–∞
def load_catalog():
    df = pd.read_excel(CATALOG_PATH)
    df.fillna('', inplace=True)
    return df

# –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
catalog = load_catalog()

st.title("üõç –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤")

# üîç –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫
for _, row in catalog.iterrows():
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç—É—é —Ü–µ–Ω—É
    price_value = row['price']
    try:
        price_str = f"{int(price_value)} ‚Ç∏" if str(price_value).strip() != '' else ""
    except ValueError:
        price_str = ""

    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ñ–æ—Ç–æ
    image_html = ""
    if str(row['image']).strip() != "":
        image_html = f'<img src="{row["image"]}" style="width:100%; border-radius:8px; margin-bottom:6px;">'

    # –í—ã–≤–æ–¥ –∫–∞—Ä—Ç–æ—á–∫–∏
    st.markdown(f"""
    <div style="border:1px solid #ddd; border-radius:12px; padding:12px; margin:10px 0;">
        {image_html}
        <p style="font-weight:bold; font-size:18px;">{row['name']}</p>
        {'<p style="font-size:16px; color:gray;">' + price_str + '</p>' if price_str else ''}
    </div>
    """, unsafe_allow_html=True)